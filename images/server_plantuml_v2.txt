@startuml
' server_plantuml_v2.txt

package "web server 127.0.0.1:8182" {

  [cargo_crev_reviews.rs_and_lib.rs] -down- [response_get_mod]
note left of cargo_crev_reviews.rs_and_lib.rs
input passphrase,
start TcpListener,
open browser
end note
  [cargo_crev_reviews.rs_and_lib.rs] -down- [response_post_mod]
  [response_post_mod] -down- [auto_generated_mod]
note right
autogenerated boilerplate
matching and routing, 
client proxy functions
end note
  [auto_generated_mod] -down- [common_structs_mod]
    note right: shared between server and client
  [response_get_mod] -down- [files_mod]
    note left: files are embedded in code
}
package "methods" {
  [common_structs_mod] -down- [srv_methods_mod]
    note right: API endpoints

}
package "data_storage" {
  [srv_methods_mod] <-down- [db_sled_mod]
  note left 
  trees: crates, version, yanked, review 
  stored in \~/.config/crev/cargo_crev_reviews_data
  end note
  [srv_methods_mod] -down-> [crev_mod] : save review
  [db_sled_mod] <-down- [crev_mod]
  [db_sled_mod] <-down- [cargo_registry_mod]
  [db_sled_mod] <-down- [crates_io_mod]
  [crev_mod] <-down-> (\~/.config/crev/)
  [cargo_registry_mod] <-down- (\~/.cargo/registry)
  [crates_io_mod] <-down- (â›…crates.io/api/v1)
}
@enduml