<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="db_sled is a database that works in memory, but is persisted on disk it looks very fast. It must be used uniquely by only one process! Be careful when changing the shape of the data: then there must exist a migration program to upgrade the data store"><meta name="keywords" content="rust, rustlang, rust-lang, db_sled_mod"><title>cargo_crev_reviews::db_sled_mod - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../cargo_crev_reviews/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module db_sled_mod</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="db_sled_mod" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">cargo_crev_reviews</a>::<wbr><a class="mod" href="#">db_sled_mod</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/cargo_crev_reviews/db_sled_mod.rs.html#3-194" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>db_sled is a database that works in memory, but is persisted on disk
it looks very fast. It must be used uniquely by only one process!
Be careful when changing the shape of the data: then there must exist a migration program to upgrade the data store</p>
</div></details><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="db_crate_mod/index.html" title="cargo_crev_reviews::db_sled_mod::db_crate_mod mod">db_crate_mod</a></div><div class="item-right docblock-short"><p>cached data for crates
for needed crates it reads (sync) from crates.io in the background</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="db_publisher_mod/index.html" title="cargo_crev_reviews::db_sled_mod::db_publisher_mod mod">db_publisher_mod</a></div><div class="item-right docblock-short"><p>persistent storage of “my trusted publishers urls”
be careful if the struct changes, then there must be an migration upgrade of the data
url is better than login, because is unique</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="db_review_mod/index.html" title="cargo_crev_reviews::db_sled_mod::db_review_mod mod">db_review_mod</a></div><div class="item-right docblock-short"><p>cached data for “my reviews”
reading from yaml files is slow, therefore
it reads (sync) from “my reviews” in the background
only one review per crate_name_version is permitted</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="db_verify_mod/index.html" title="cargo_crev_reviews::db_sled_mod::db_verify_mod mod">db_verify_mod</a></div><div class="item-right docblock-short"><p>cached data for the command “verify”
the command can be slow therefore
it reads (sync) the result of the command in the background</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="db_version_mod/index.html" title="cargo_crev_reviews::db_sled_mod::db_version_mod mod">db_version_mod</a></div><div class="item-right docblock-short"><p>cached data for crate versions
for needed crates it reads (sync) from crates.io api in the background</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="db_yanked_mod/index.html" title="cargo_crev_reviews::db_sled_mod::db_yanked_mod mod">db_yanked_mod</a></div><div class="item-right docblock-short"><p>cached list of yanked versions in the sled database
so the reading should be faster than reading from cargo registry index
this is not immutable like other information from crates.io and it needs regular updates
it can read the data from cargo registry.</p>
</div></div></div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DB_SLED.html" title="cargo_crev_reviews::db_sled_mod::DB_SLED struct">DB_SLED</a></div><div class="item-right docblock-short"><p>“sled” db stays open all the time of the program running.
this program on start checks if there is an instance already running, so to guarantee only one process access the db files.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DB_SLED_METADATA.html" title="cargo_crev_reviews::db_sled_mod::DB_SLED_METADATA struct">DB_SLED_METADATA</a></div><div class="item-right docblock-short"><p>I will store the version here, so I can use it for migration upgrades</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.POOL.html" title="cargo_crev_reviews::db_sled_mod::POOL struct">POOL</a></div><div class="item-right docblock-short"><p>3 threads to download in parallel</p>
</div></div></div><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.db_sled_migration_update.html" title="cargo_crev_reviews::db_sled_mod::db_sled_migration_update fn">db_sled_migration_update</a></div><div class="item-right docblock-short"><p>if the data structure changes then it must be updated by a migration</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.download_in_background_crate_versions.html" title="cargo_crev_reviews::db_sled_mod::download_in_background_crate_versions fn">download_in_background_crate_versions</a></div><div class="item-right docblock-short"><p>to avoid double or triple call to crates.io for the same crate</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.sync_in_background_reviews.html" title="cargo_crev_reviews::db_sled_mod::sync_in_background_reviews fn">sync_in_background_reviews</a></div><div class="item-right docblock-short"><p>working with crev data looks slow.
I will sync in background with fast sled database and work from there.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.sync_in_background_verify.html" title="cargo_crev_reviews::db_sled_mod::sync_in_background_verify fn">sync_in_background_verify</a></div><div class="item-right docblock-short"><p>working with crev verify looks slow.
I will sync in background with fast sled database and work from there.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.sync_in_background_yanked.html" title="cargo_crev_reviews::db_sled_mod::sync_in_background_yanked fn">sync_in_background_yanked</a></div><div class="item-right docblock-short"><p>from cargo registry read all versions that are in db_version
only the yanked store in db_yanked</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.upgrade_to_2021_1228_1255.html" title="cargo_crev_reviews::db_sled_mod::upgrade_to_2021_1228_1255 fn">upgrade_to_2021_1228_1255</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.upgrade_to_2021_1228_1528.html" title="cargo_crev_reviews::db_sled_mod::upgrade_to_2021_1228_1528 fn">upgrade_to_2021_1228_1528</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="cargo_crev_reviews" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>